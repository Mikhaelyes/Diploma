%класс документа, А4, шрифт
\documentclass[reprint, amsmath, amssymb, aps,]{revtex4-2}
%\documentclass[a4paper,12pt]{article}

\usepackage[T2A]{fontenc} %кодировка
\usepackage[utf8]{inputenc} %кодировка исходного текста
\usepackage[english, russian]{babel} %локализация и переносы

%математика
\usepackage{amsmath, amsfonts, amssymb, amsthm, mathtools}

%графика
\usepackage{graphicx}
\DeclareGraphicsExtensions{.pdf,.png,.jpg}
\usepackage{wrapfig} %обтекание фигур

\usepackage{multirow}
\usepackage{dcolumn}% Align table columns on decimal point
\usepackage{bm}% bold math
\usepackage{caption}

\begin{document}
\title{Тестирование стационарности сообществ}



\author{Васильев Михаил Владимирович}
\affiliation{%
 Студент 5 курса факультета ФРКТ\\
}%

\collaboration{Московский физико-технический институт}%\noaffiliation

\date{11 мая 2024 г.}% It is always \today, today,
             %  but any date may be explicitly specified
             



\maketitle

\section{Введение}
Постановка задачи состоит в исследовании стационарности динамического графа во времени. Для этого используется датесет графов из открытых источников таких как (1). Одним из подходов исследования стационарности сообществ является сведение к тестированию случайных последовательностей, возникающих на графе. Для этого используются случайные блуждания для сбора информации о характеристиках влиятельности (PageRank), узлов сообщества, которые определяют соответствующие случайные последовательности. Далее производится вычисление хвостового индекса на элементах этих последовательностей и посредствам визуального анализа делается вывод о стационарности графа во времени. Ключевым критерием анализа является значительное изменение хвостового индекса между соседними временными промежутками.



\section{Данные}
Данные взяты из открытого графового репозитория (1), а именно динамический граф fb-messages.csv. Описание: "Социальная сеть, похожая на Facebook, создана на основе онлайн-сообщества студентов Калифорнийского университета в Ирвине. В набор данных входят пользователи, которые отправили или получили хотя бы одно сообщение." Граф имеет три столбца: source, target, time. Количество вершин - 1900, количество рёбер - 61732.


\section{Описательные характеристики}
Рассмотрим граф как статитеческий на последний момент времени, рассчитаем для каждого его узла PageRank и проведём исследование расспределения. Исследование состоит в оценивании индекса экстримального значения $\gamma$ разными методами и изучении хвоста распределения. Методы оценивания включают в себя: оценку Хилла (Hill), оценку моментов (moment),  смешанную оценку мементов (Mixed Moment) и оценку отношения (Ratio).




\subsection{Гистограмма распределения}

\begin{center}
\centering 
\includegraphics[scale=0.5]{Imagines/PR_hist.png}
\captionof{figure}{Распределение PageRank}
\end{center}


\subsection{Расчёт количества моментов распределения}

\begin{center}
\centering 
\includegraphics[scale=0.5]{Imagines/Rn.png}
\captionof{figure}{Зависимость отношшения максимума к сумме элементов для различных значений хвостового индекса}
\end{center}

По итогам исследования можно сказать, 
Для $p \in \lbrace 0.25, 0.75, 1 \rbrace $ $R_{n}(p)$ по всей видимости стремиться к нулю при возрастании n.
Для $p \in \lbrace 2, 3, 4, 5, 10, 15, 30 \rbrace $ $ Rn(p)$ по всей видимости стремиться к положительной константе при возрастании n.

Вывод: $E|X|^{p} < \infty$ для $p \leqslant 1$ только, $E|X|^{p} = \infty$ для $p > 1$.  Значит распределение имеет единственный момент.


\subsection{Оценка распределения}

\begin{center}
\centering 
\includegraphics[scale=0.5]{Imagines/QQ.png}
\captionof{figure}{QQ-plot для нормального распределения}
\end{center}
Как видно нормальное, экспоненциальное и Парето обобщённое распределения не подходят для выборки. В то время как логнормальное распределение относительно подходит для выборки.




\subsection{Оценки индекса экстримального значения}
\begin{center}
\centering 
\includegraphics[scale=0.5]{Imagines/Hill_estimator}
\captionof{figure}{Hills estimator plot}
\end{center}

\begin{center}
\centering 
\includegraphics[scale=0.5]{Imagines/Ratio_estimator}
\captionof{figure}{Ratio estimator plot}
\end{center}

\begin{center}
\centering 
\includegraphics[scale=0.5]{Imagines/Moment_estimator}
\captionof{figure}{Moment estimator plot}
\end{center}

\begin{center}
\centering 
\includegraphics[scale=0.5]{Imagines/UH_estimator}
\captionof{figure}{UH estimator plot}
\end{center}

\begin{center}
\centering 
\includegraphics[scale=0.5]{Imagines/Pickands_estimator}
\captionof{figure}{Pickands estimator plot}
\end{center}

\begin{center}
\centering 
\includegraphics[scale=0.5]{Imagines/Mixed_moment_estimator}
\captionof{figure}{Mixed estimator plot}
\end{center}

Из графиков видно, что оценки Hill, Ratio и UH на предоставленных данных работают плохо. Тогда как оценки Moment, Pickands и Mixed Moment имеют интервалы стабильности. При взятии среднего по этим оценкам по интервалу стабильности получаются значения 0.42, 0.34 и 0.21 соответственно. Для дальнейших вычислений хвостового индекса будем использовать Mixed Moment estimator в связи с относительной стабильностью оценки на всей последовательности.

Вывод: по всей видимости хвостовой индекс можно положить примерно равным $\gamma \thickapprox 0.21$.    



\section{Разбиение на сообщества}
Библиотека NetworkX позволяет разделить граф на сообщества посредствам Louvain Community Detection Algorithm. Выявлено 13 сообществ разного размера.



\begin{table}[h!]
\begin{tabular}{|l|l|lll}
\cline{1-2}
Номер сообщества & Количество вершин &  &  &  \\ \cline{1-2}
0                & 125               &  &  &  \\ \cline{1-2}
1                & 2                 &  &  &  \\ \cline{1-2}
2                & 236               &  &  &  \\ \cline{1-2}
3                & 367               &  &  &  \\ \cline{1-2}
4                & 122               &  &  &  \\ \cline{1-2}
5                & 41                &  &  &  \\ \cline{1-2}
6                & 331               &  &  &  \\ \cline{1-2}
7                & 248               &  &  &  \\ \cline{1-2}
8                & 29                &  &  &  \\ \cline{1-2}
9                & 287               &  &  &  \\ \cline{1-2}
10               & 107               &  &  &  \\ \cline{1-2}
11               & 2                 &  &  &  \\ \cline{1-2}
12               & 2                 &  &  &  \\ \cline{1-2}

\end{tabular}
\caption {Таблица количества вершин в сообществах графа}
\end{table}




\section{Тестирование стационарности}

Тестирование стационарности ссобществ производится методом сведения к тестированию случайных последовательностей, возникающих на графе. Для этого рассматриваются состояния динамического графа на выбранных временных отрезках. Для каждого узла рассчитывается его PageRank. Случайным образом выбираются вершины графа для формирования последовательности с фиксированной шириной окна. После чего производится оценка индекса экстримального значения для элементов последовательности. По итогам рассчётов получена последовательность хвостовых индексов случайных последовательностей во времени. 
На рис. 10 представлена зависимость хвостового индекса динамического графа во времени.


\begin{center}
\centering 
\includegraphics[scale=0.5]{Imagines/tail_time}
\captionof{figure}{Временная динамика хвостового индекса графа}
\end{center}

На рис. 11 представлена зацвисимость числа вершин графа от времени. Шкала OY логарифмическая.

\begin{center}
\centering 
\includegraphics[scale=0.5]{Imagines/num_nodes}
\captionof{figure}{Временная динамика числа вершин графа}
\end{center}

Исходя из графиков видно, что в первые моменты времени граф нестационарен, так как происходит быстрое увеличение числа узлов и рёбер графа. Тогда как в дальнейшем хвостовой индекс находится в определённом диапозоне значений и меняется слабо.


\section{Выводы}
К настоящемму моменту времени проведено исследование индекса экстримального значения динамического графа. Получен промежуток нестационарности графа, приведены возможные причины явления. В дальнейшем будут проведены исследования разных методов подбора последовательности, такие как алгоритм Метрополиса — Гастингса, будет изучены методы разбиения графа на сообщества.   



\section{Литература}
1) https://networkrepository.com
2) 



\end{document}